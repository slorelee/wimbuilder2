<!DOCTYPE html>
<!--WimBuilder_UI.hta-->
<html>
<head>
    <HTA:Application id="oAPP"
        applicationname="APP"
        icon="assets\app.ico" />

    <title>Wim Builder</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <!-- <script>var $app_commandline = oAPP.commandline;</script> -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <link rel="stylesheet" href="vendor/pure-min.css" />
    <link rel="stylesheet" href="vendor/jstree/themes/default/style.min.css" />
    <link rel="stylesheet" href="vendor/jquery-ui/jquery-ui.min.css">

    <link rel="stylesheet" href="css/side-menu.css" />
    <link rel="stylesheet" href="css/page.css" />
    <link rel="stylesheet" href="css/page_patch.css" />
    <link rel="stylesheet" href="css/ibutton.css" />
    <link rel="stylesheet" href="css/switch.css" />
    <link rel="stylesheet" href="htakit/css/uikit-tab.css" />
    <link rel="stylesheet" href="css/alert.css" />
    <link rel="stylesheet" href="css/themes.css" />
    <link rel="stylesheet" href="css/mode.css" />
</head>

<body  onbeforeunload="window_beforeunload()">
<script>var $IE_VER = '0';</script>
 <!--[if lte IE 6]>
    <script>$IE_VER = '-6';</script>
 <![endif]-->

  <!--[if IE 7]>
    <script>$IE_VER = '7';</script>
 <![endif]-->

 <!--[if lt IE 9]>
    <script>$IE_VER = '8';</script>
    <script src="js/ES5_fix.js"></script>
    <script src="vendor/jquery-1.12.4.min.js"></script>
    <style>
        /* overwrite onoffswitch css */
        .onoffswitch-label {
        display: none;
        }
    </style>
<![endif]-->

 <!--[if gte IE 9]>
      <script>$IE_VER = '9+';</script>
      <script src="vendor/jquery-3.3.1.min.js"></script>
<![endif]-->

<script>
// Edage
if ($IE_VER == '0') {
    $IE_VER = '9+';
    document.write('<script src="vendor/jquery-3.3.1.min.js"><\/script>');
    /*
    var head_script = document.createElement("script");
    head_script.type = "text/javascript";
    head_script.src = "vendor/jquery-3.3.1.min.js";
    document.getElementsByTagName('head')[0].appendChild(head_script);
    */
}
</script>

<script src="vendor/jstree/jstree.min.js"></script>
<script src="vendor/marked.min.js"></script>
<script src="vendor/jquery-ui/jquery-ui.min.js"></script>
<script src="htakit/js/htakit.js"></script>
<script src="app.js"></script>
<script src="update.js"></script>
<script src="js/fs_project.js"></script>
<script src="js/fs_patch.js"></script>
<script src="js/app.js"></script>
<script src="js/helper_html.js"></script>
<script src="js/helper_i18n.js"></script>
<script src="js/helper_page.js"></script>
<script src="js/helper_patch.js"></script>
<script src="js/definition.js"></script>
<script src="default_config.js"></script>
<script src="../config.js"></script>
<script src="../AppData/auto_config.js"></script>
<script src="../AppData.link/auto_config.js"></script>

<div id="theme_div">
    <canvas id="theme_canvas"></canvas>
</div>

<div>
  <input type="file" style="display:none" id="$f" /> <!-- gobal OpenFileDialog element -->
</div>
<div id="layout">

<!-- ############################# Menu Start ############################# -->
<script>
if ($IE_VER == '9+') {
    document.write('<a href="#menu" id="menuLink" class="menu-link">');
    document.write('        <!-- Hamburger icon -->');
    document.write('        <span></span>');
    document.write('</a>');
}
</script>

 <!--[if lt IE 9]>
<div>
<div id="menu_fixed" style="float:left;width:150px">
<style>
#menu_fixed .pure-menu {
  height:100%;
  background:#000;
}

#menu_fixed .pure-menu-heading {
  color:#fff;
}
#menu_fixed .pure-menu-item:active {
    background:#eee;
}
#menu_fixed .pure-menu-selected {
    background:#1f8dd6;
}

#menu_fixed .pure-menu-selected a {
    color:#fff;
}
</style>
<![endif]-->

<script>
if ($IE_VER == '9+') {
    document.write('<div id="menu">');
}
</script>
    <div class="pure-menu">
        <a class="pure-menu-heading" href="#">
            <script>document.write($app_name)</script>
        </a>
        <ul id="app_menu_items" class="pure-menu-list">
        </ul>
    </div>
</div>
<!-- ############################# Menu End ############################# -->

<!-- ############################# content Start ############################# -->

<!--[if lt IE 9]>
<div id="content" style="margin-left:160px;margin-bottom:40px">
<![endif]-->

<script>
if ($IE_VER == '9+') {
    document.write('<div id="content" style="margin-bottom:40px">');
}
</script>

<div id="page_header">
<div id="quick_build" style="display:none;float:right;margin:5px 10px 0px 0px">
    <a href="#" title="Quick build" class="i18n-title" onclick="do_quick_build();"
       style="display:inline-block;height:48px;width:48px;background-image:url(img/play.png)" ></a>
    <div style="display:inline-block;height:48px;">
    <label for="quick_build_mode_run">
        <input type="radio" name="quick_build_mode" id="quick_build_mode_run" /><span class="i18n-text">build(cmd)</span><br/>
    </label>
    <label for="quick_build_mode_exec">
        <input type="radio" name="quick_build_mode" id="quick_build_mode_exec" checked /><span class="i18n-text">build(log)</span>
    </label>
    </div>
</div>
</div>

<!-- ############################# page_start Start ############################# -->
<div id="page_start" class="content_page pure-form">

<div id="page_start_info" style="display:none">
    <div class="alert alert-info i18n-html"><strong>INFO</strong>:You can set the default settings in 'config.js', and your selection will auto save in 'AppData\auto_config.js', make you start quickly for next time. If you want to modify the settings later, use the left-side navigition menu to show this page.</div>
    <div class="alert alert-info i18n-html beginner-show"><strong>INFO</strong>:Current mode is 'Beginner', you can change the mode in 'Settings' page.</div>
</div>
<br/>
<div style="display:none"> <!-- hide workspace -->
<input type="text" id="wb_workspace" style="width:450px" value="D:\WB_Workspace" />
<a href="#" disabled="disabled" id="wb_workspace_folder_btn" class="ibutton browse i18n-title i18n-text"
    title="Set the build workspace">Browse...</a><br/>
</div>

<span id="wb_src_prompt" style="font-weight:bold;" class="i18n-text">Please select the Windows ISO folder/drive, or the 'sources' folder(auto detect)</span><br/>
<input type="text" id="wb_src_folder" style="width:450px" value="" />
<!-- keep same align -->
<select style="visibility:hidden"><option value ="-1">-</option></select>
<a href="#" id="wb_src_folder_btn" class="ibutton browse i18n-title i18n-text"
    title="Select the image path or the 'sources' folder">Browse...</a><br/>

<span style="font-weight:bold;" class="i18n-text beginner-hide">Select the install.wim file if it needed</span><br/>
<input type="text" id="wb_src" style="width:450px" value="D:\WB_Workspace\mnt\install.wim" />
<script>
    document.write('<select id="wb_src_idx_opt">');
    document.write('  <option value ="-1">-</option>');
    for (var i = 1; i < 100; i++) {
        document.write('<option value="' + i + '">' + i + '</option>');
    }
    document.write('</select>');
</script>

<a href="#" id="wb_src_wim_btn" class="ibutton browse i18n-title beginner-hide"
    title="Select the install.wim file if it needed">Wim/Esd</a>

<label class="beginner-hide" for="wb_auto_winre">
    <input type="checkbox" class="beginner-hide" id="wb_auto_winre" checked /><span class="i18n-text">Auto extract the winre.wim</span>
</label>

<div id="wb_src_alert" class="alert alert-info i18n-html" style="display:none"><strong>INFO</strong>:The install.wim does not exist.</div>
<div id="wb_src_wiminfo" class="alert alert-info">wim information</div>

<br/>
<span style="font-weight:bold;" class="i18n-text beginner-hide">Select the base image(boot.wim/winre.wim or other customed.wim)</span><br/>
<input type="text" id="wb_base" style="width:450px" />
<select id='wb_base_idx_opt'>
  <option value ="-1">-</option>
  <option value ="1">1</option>
  <option value ="2">2</option>
  <option value="3">3</option>
  <option value="4">4</option>
  <option value="5">5</option>
  <option value="6">6</option>
</select>


<a href="#" id="wb_base_wim_btn" class="ibutton browse i18n-title beginner-hide" 
    title="Select the base image(boot.wim/winre.wim or other customed.wim)">Wim</a>

<!-- Selectmenu -->
<select id="quick_wim_selector" class="beginner-hide" >
    <option value="-" selected="selected"> -</option>
    <option value="winre.wim[1]"> winre.wim[1]</option>
    <option value="test\boot.wim[1]"> test\boot.wim (x64)</option>
    <option value="test\boot.wim[2]"> test\boot.wim (x86)</option>
</select>

<div id="wb_base_alert" class="alert alert-error i18n-html" style="display:none"><strong>ERROR</strong>:The base wim does not exist.</div>
<div id="wb_base_wiminfo" class="alert alert-info">wim information</div>

    <div>
        <button class="pure-button pre-button" enable="false">&lt;pre</button>
        <button class="pure-button next-button" onclick="$('#menu_project').click()">next&gt;</button>
    </div>

<br/>
<br/>
<div class="alert alert-warning i18n-html"><strong>Notice</strong>:Please select the correct wim file, and the image index, otherwise cause build failed.</div>
<div class="alert alert-warning i18n-html"><strong>Notice</strong>:Some updated versions may not boot properly. Please refer to the description of project for the supported version.</div>

</div>
<!-- ############################# page_start End ############################# -->


<!-- ############################# page_project Start ############################# -->
<div id="page_project" class="content_page">
    <div>
        <a href="#" class="ibutton prev" onclick="$('#menu_start').click()">Prev</a>
        <a href="#" class="ibutton right next_r" onclick="$('#menu_patch').click()">Next</a>
        <label for="wb_skip_project_page">
            <input type="checkbox" id="wb_skip_project_page" /><span class="i18n-text">Skip when project is selected</span>
        </label>
    </div>

<div id="pj_tab">
    <div class="tab tab0">
        <span style="font-weight:bold;color:#000;" class="i18n-text">Please select a project:</span>
        <div>
            <div style="float:left" id="project_list"></div>
        </div>
        <div style="float:left;margin-left:10px">
        <span class="i18n-text">Project Information</span>
        <div id="project_desc"></div>
        </div>
    </div>
    <div class="tab tab1">
        <!-- <span style="font-weight:bold;color:#000;">Project Info</span> -->
        <div id="project_html"></div>
    </div>
</div>
<script type="text/javascript">
    $("#pj_tab").ultab({header:['Projects', 'Details']})
</script>

</div>
<!-- ############################# page_project End ############################# -->


<!-- ############################# page_patches Start ############################# -->
<div id="page_patch" class="content_page pure-form-input">
    <div id="patch_shared_style_holder"></div>

    <div id="preset-saveas-dialog" class="pure-form" title="SaveAs Preset">
    <form>
        <fieldset>
        <label class=" i18n-text">New Name:</label><br/>
        <input type="text" id="preset_saveas_name" style="width:90%" value="custom" />
        <br/>
        <br/>
        <label class=" i18n-text">Saved Presets:</label><br/>
        <textarea id="preset_name_list" style="width:90%;height:150px;overflow: scroll;" readonly></textarea>

        <!-- Allow form submission with keyboard without duplicating the dialog button -->
        <input type="submit" tabindex="-1" style="position:absolute;top:-1000px;width:50px" />
        </fieldset>
    </form>
    </div>

    <div>
        <button class="pure-button pre-button" onclick="$('#menu_project').click()">&lt;pre</button>
        <button class="pure-button next-button" onclick="$('#menu_build').click()">next&gt;</button>
    </div>
    <div style="margin-top:20px; width:98%; border:0.5px solid #ccc;"></div>
    <div style="margin-top:5px;margin-bottom:-12px">
    <span style="font-weight:bold;color:#000;" class="i18n-text">Current project:</span>
    <span id="patch_project_name"></span>
    <span style="margin-left:180px" class="i18n-text">Patch Preset:</span>
    <!-- Selectmenu -->
    <select id="patch_preset" width="300">
        <option selected="selected" class="i18n-text" value="default">default</option>
        <option>-</option>
    </select>
    <button id="preset_browse" class="ui-button i18n-title" title="Browse..." onclick="OpenFolder($appdata_dir + '\\' + $obj_project.path + '\\_Assets_\\preset\\')"></button>
    <button id="preset_saveas" class="ui-button i18n-title" title="Save As..." ></button>
    </div>
    <div id="patches_area">
        <div id="patches_list" style="overflow:auto">
            <div id="patches_tree"></div>
        </div>
        <div id="patch_html" style="overflow:auto"></div>
    </div>
    <div style="width:98%;height:1px;overflow:auto"></div>
</div>
<!-- ############################# page_patches End ############################# -->


<!-- ############################# page_building Start ############################# -->
<div id="page_build" class="content_page">

    <div id="x-drive-confirm" style="display:none" class="i18n-title" title="Mapping drive is used">
        <p><span class="ui-icon ui-icon-alert" style="float:left; margin:12px 12px 20px 0;"></span>
           <span class="i18n-text">If the Drive is used by the unfinish build, click Continue to go on, it will be fixed,</span><br/>
           <span class="i18n-text">otherwise, please select an usable drive.</span>
        </p>
    </div>

    <div id="x_drive_mapping" style="margin:10px 15px 10px 0px;padding:5px;border:2px solid #c0c0c0;">
        <label class="i18n-text">Subst mounted folder to Drive</label>
        <span style="margin-left:20px" />
        <label><input type="radio" name="wb_x_drive" style="margin-left:20px" value="auto" checked/><span class="i18n-text"> Auto</span><span id="x_auto_drive" style="color:red">(-)</span></label>
        <label><input type="radio" name="wb_x_drive" style="margin-left:20px" value="A:" />&nbsp;&nbsp;A:&nbsp;&nbsp;</label>
        <label><input type="radio" name="wb_x_drive" style="margin-left:20px" value="B:" />&nbsp;&nbsp;B:&nbsp;&nbsp;</label>
        <label><input type="radio" name="wb_x_drive" style="margin-left:20px" value="V:" />&nbsp;&nbsp;V:&nbsp;&nbsp;</label>
        <label><input type="radio" name="wb_x_drive" style="margin-left:20px" value="W:" />&nbsp;&nbsp;W:&nbsp;&nbsp;</label>
        <label><input type="radio" name="wb_x_drive" style="margin-left:20px" value="X:" />&nbsp;&nbsp;X:&nbsp;&nbsp;</label>
        <label><input type="radio" name="wb_x_drive" style="margin-left:20px" value="Y:" />&nbsp;&nbsp;Y:&nbsp;&nbsp;</label>
        <label><input type="radio" name="wb_x_drive" style="margin-left:20px" value="Z:" />&nbsp;&nbsp;Z:&nbsp;&nbsp;</label>
        <div id="x_drive_notice" class="alert alert-warning i18n-html" style="display2:none"><strong>INFO</strong>:If the mounted folder isn't mapping to X:, The patch scripts need use %X%\ than X:\ when modifying, deleting the files, and please don't create the shortcuts on building, they may point to the wrong target, do it on booting phase.</div>
    </div>
    <div>
        <style scoped>
        .button-green, .button-maroon, .button-orange, .button-lightblue {
            color: white;
            border-radius: 4px;
            text-shadow: 0 1px 1px rgba(0, 0, 0, 0.2);
        }

        .button-green {
            background: rgb(28, 184, 65); /* this is a green */
        }

        .button-maroon {
            background: rgb(202, 60, 60); /* this is a maroon */
        }

        .button-orange {
            background: rgb(223, 117, 20); /* this is an orange */
        }

        .button-lightblue {
            background: rgb(66, 184, 221); /* this is a light blue */
        }
        </style>
        <button class="pure-button button-green i18n-text" onclick="cleanup()">0-cleanup</button>
        <button class="pure-button button-maroon i18n-text" onclick="run_build()">1-build(cmd)</button>
        <button class="pure-button button-orange i18n-text" onclick="exec_build()">1-build(log)</button>
        <button class="pure-button button-lightblue i18n-text" onclick="make_iso()">2-make_iso</button>
        <label for="wb_auto_makeiso">
            <input type="checkbox" id="wb_auto_makeiso" /><span class="i18n-text">Create ISO after building</span>
        </label>
    </div>
    <div style="margin-top:10px">
        <div class="pure-form">
             <label for="wb_auto_testiso">
                <input type="checkbox" id="wb_auto_testiso" ><span title="WimBuilder2\test\*.cmd" class="i18n-text">Execute command after building:</span>
            </label>
            <input type="text" id="wb_test_cmd" style="width:50%;" class="i18n-placeholder" placeholder="Please input the command.(eg. VBox.cmd testvm)" />
            <button class="pure-button pure-button-primary i18n-text" onclick="test_iso()">Execute</button>
        </div>
        <style type="text/css">
            #wb_test_cmd {
                color: #000;
            }
            #wb_test_cmd:-ms-input-placeholder {
                color: #999;
            }
        </style>
    </div>
    <div id="build_stdout" style="overflow:scroll;margin-top:10px">stdout</div>
    <div style="margin-top:10px">
        <button class="pure-button i18n-text" onclick="OpenFolder(_log_path)">Open log folder</button>
        <button class="pure-button i18n-text" onclick="OpenFile(_log_path + '\\last_wimbuilder.log')">Open last build log</button>
    </div>
    <div>
        <button class="pure-button pre-button" onclick="$('#menu_patch').click()">&lt;pre</button>
        <button class="pure-button next-button" onclick="$('#menu_settings').click()">next&gt;</button>
    </div>
</div>
<!-- ############################# page_building End ############################# -->

<!-- ############################# page_settings Start ############################# -->
<div id="page_settings" class="content_page">
    <div>
        <button class="pure-button pre-button" onclick="$('#menu_build').click()">&lt;pre</button>
        <button class="pure-button next-button" onclick="$('#menu_about').click()">next&gt;</button>
    </div>
    <br/>
    <style>
        #settings_form label {
            display:inline-block;
            width: 20%;
        }
        #settings_form select {
            width: 30%;
        }
    </style>
    <div id="settings_form" class="pure-form">
        <div>
            <label class="i18n-text">Mode :</label>
            <label><input type="radio" name="app.mode" value="Beginner" checked />
                &nbsp;<span class="i18n-text">Beginner</span>
            </label>
            <label><input type="radio" name="app.mode" value="Professional" />
                &nbsp;<span class="i18n-text">Professional</span>
            </label>
            <label><input type="radio" name="app.mode" value="Developer" />
                &nbsp;<span class="i18n-text">Developer</span>
            </label>
        </div>
        <div class="alert alert-info i18n-html">
            <span class="i18n-html"><strong>Beginner</strong> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--- Just started using this software. Make the options be kind. Avoid failure due to incorrect option settings.</span><br/>
            <span class="i18n-html"><strong>Professional</strong> --- Knows this software well. Shows more options.</span><br/>
            <span class="i18n-html"><strong>Developer</strong> &nbsp;&nbsp;&nbsp;&nbsp;--- Knows the codes of this software, Shows the options for developer.</span>
        </div>
        <br/>

        <div>
            <label class="i18n-text">Language :</label>
            <select id='ui_lang'></select>
        </div>

        <div>
            <label class="i18n-text">Theme :</label>
            <select id='ui_theme'></select>
        </div>

        <div>
            <label>DPI :</label>
            <select id='ui_dpi'>
                <option value ="">-</option>
                <option value ="100">100%</option>
                <option value ="125">125%</option>
                <option value="high" class="i18n-text">High</option>
                <option value="custom" class="i18n-text">Custom</option>
            </select>
        </div>
        <br /><br />
        <div>
            <label class="i18n-text">Update :</label>
            <select id='ui_update'>
                <option value ="github">GitHub</option>
                <option value ="gitee">Gitee</option>
                <!-- <option value ="wimbuilder">WimBuilder</option> -->
                <option value="custom" class="i18n-text">Custom</option>
            </select>
            <br />
            <div>
                <label style="padding-left: 20px;">REMOTE_URL :</label>
                <input type="text" style="margin-left:-20px;width:70%" id="ui_update_remote_url" value="http://"/><br/>
                <label style="padding-left: 20px;">SOURCE_URL :</label>
                <input type="text" style="margin-left:-20px;width:70%" id="ui_update_source_url" value="http://"/><br/>
            </div>
        </div>

        <br /><br />
        <button class="pure-button button-green" style="display:none;margin-left:40%;" class="i18n-text"
            onclick="settings_page_apply()">Apply</button>
    </div>
</div>
<!-- ############################# page_settings End ############################# -->

<!-- ############################# page_advanced Start ############################# -->
<div id="page_advanced" class="content_page">
<div id="adv_tab">
    <div class="tab tab0">
        <button class="pure-button button-green i18n-text" onclick="clean_advcmd()">Clear</button>
        <button class="pure-button button-maroon i18n-text" onclick="load_advcmd()">Load</button>
        <button class="pure-button button-orange i18n-text" onclick="save_advcmd()">Save</button>
        <button class="pure-button pure-button-primary i18n-text" style="margin-left:50px;" onclick="exec_advcmd()">Execute</button>
        <br/>
        <textarea id="adv_cmdtext" style="overflow:scroll;margin-top:10px" onkeydown="return advcmd_save_event();"></textarea>
    </div>
    <div class="tab tab1">
    </div>
</div>
<script type="text/javascript">
    $("#adv_tab").ultab({header:['Commands', 'Reserved']})
</script>

</div>
<!-- ############################# page_advanced End ############################# -->


<!-- ############################# page_about Start ############################# -->
<div id="page_about" class="content_page">
    <button class="pure-button button-lightblue i18n-text" onclick="update_me()">Update</button>
    <button class="pure-button button-green i18n-text" onclick="restart_me()">Restart</button>
    <!-- <button class="pure-button button-lightblue" onclick="self.close()">closeMe</button>  -->
    <br/><br/>
    Project:<a herf="#" onclick="Run($(this).text())">https://github.com/slorelee/wimbuilder2</a><br/>
    Chinese:<a herf="#" onclick="Run($(this).text())">http://bbs.wuyou.net/forum.php?mod=viewthread&tid=411399</a><br/>
    English:<a herf="#" onclick="Run($(this).text())">http://theoven.org/viewforum.php?f=13</a><br/>
    <div id="page_about_area"></div>
</div>
<!-- ############################# page_about End ############################# -->

</div>
<!-- ############################# content End ############################# -->
 <!--[if lt IE 9]>
 </div>
<![endif]-->

</div>

<style type="text/css">
    #statusbar {
        position: fixed;right: 0;top: 100%;
        height: 30px;width: 100%;
        transform: translate(0,-100%);
        background-color: #191818;color: white;
    }
    #status_text_div {
        float:right;margin-top:-10px;
        margin-right: 5px;
    }
</style>

<!--[if lt IE 9]>
<style type="text/css">
    #statusbar {
        left: 150px;bottom: 0px;right: auto;top: auto;
    }
    #status_text_div {
        margin-right: 155px;
    }
</style>
<![endif]-->

<div>
    <style>
        #settings_float_menu {
            display: none;
            position: fixed;
            bottom: 2.2em;
            right: 0.3em;
            width: 460px;
            height: 4.2em;
            background: rgb(48, 48, 48);
            opacity: 0.85;
            color: white;
            box-shadow: -3px 3px 3px black;
        }
    </style>
    <div id="settings_float_menu">
        <div style="font-size: 1.3em;" class="i18n-text">Restart to apply changes to your settings?</div>
        <div style="float: right;margin:5px 8px 0px 0px;">
            <button id="settings_restart_yes" style="height:2em;" class="i18n-text pure-button button-lightblue">Yes</button>
            <button id="settings_restart_no" style="height:2em;" class="i18n-text pure-button">No</button>
        </div>
    </div>
</div>

<div id="statusbar">
    <div id="status_text_div"><p id="status_text"></p></div>
</div>

<script src="js/i18n.js"></script>
<script type="text/javascript">
    $app_verstr = $app_ver + '.' + $app_rev;
    document.title = $app_title + " - v" + $app_verstr;
    function window_onload() {
        var w = $width, h = $height; 
        window.resizeTo(w, h);
        window.moveTo((window.screen.width - w) / 2,
            (window.screen.height - h) / 2);
    }
    i18n_init();
    dpi_adapt($ui_settings['dpi']);
    mode_adapt($ui_settings['mode']);
    window_onload();
    if ($IE_VER != '9+') {
        $("#menu_fixed").css('height', $height - 42);
    }

    function dpi_adapt(scale) {
        if (scale != '') {
            load_css('css/dpi_' + scale + '.css');
        }
    }

    function mode_adapt(mode) {
        if (mode != '') {
            load_css('css/mode_' + mode + '.css');
        }
    }

    function window_beforeunload() {
        if ($app_auto_save_window_size) {
            var w = window.outerWidth, h = window.outerHeight;
            if (typeof(w) == 'number') $width = w;
            if (typeof(h) == 'number') $height = h;
        }
        auto_save_settings();
        save_current_preset();
    }
</script>
<script src="js/page_start.js"></script>
<script src="js/page_project.js"></script>
<script src="js/page_patches.js"></script>
<script src="js/page_build.js"></script>
<script src="js/page_settings.js"></script>
<script src="js/page_advanced.js"></script>
<script src="js/page_about.js"></script>
<script src="js/menu_click.js"></script>
<script src="js/init.js"></script>
<script src="themes/themes.js"></script>
</body>
</html>
